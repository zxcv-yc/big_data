<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="link/css/main.css">
    <script src="./link/js/jquery.js"></script>
    <script src="link/js/echarts.js"></script>
    <script src="link/js/layer-v3.1.1/layer/layer.js"></script>
    <title>地级市</title>
</head>

<body>
    <div class="bg_img" style=" background: url(images/bg1.png);">
        <!-- <img src="images/bg1.png"> -->
    </div>
    <div class="city_header">
        <img src="images/city_head.png">
        <div class="city_time"></div>
    </div>
    <div class="now_choose_box">当前选择：<span class="now_choose"></span></div>
    <div class="city_header_r">
        <img src="images/city_head_r.png">
        <div class="header_cilck_1"></div>
        <div class="header_cilck_2"></div>
        <div class="header_cilck_3"></div>
        <div class="header_cilck_4"></div>
    </div>
    <div class="content">
        <div class="menu"></div>
        <div class="content_right">
            <div class="right_top">
                <div class="item_title">
                    <div class="title_text">接种点各疫苗接种情况</div>
                    <div class="title_img">
                        <img src="images/title_img.png" alt="" srcset="">
                    </div>
                </div>
                <div id="ym_jiezhong" style="height:230px"></div>
                <div class="top_left">
                    <img src="images/top-left.png" alt="" srcset="">
                </div>
                <div class="top_right">
                    <img src="images/top-right.png" alt="" srcset="">
                </div>
                <div class="bottom-left">
                    <img src="images/bottom-left.png" alt="" srcset="">
                </div>
                <div class="bottom-right">
                    <img src="images/bottom-right.png" alt="" srcset="">
                </div>
            </div>
            <div class="right_item">
                <div class="item_title">
                    <div class="title_text">各疫苗出入库情况</div>
                    <div class="title_img">
                        <img src="images/title_img.png" alt="" srcset="">
                    </div>
                </div>
                <div class="next_img">
                    <img src="images/next.png" alt="">
                </div>
                <div class="ona_img isdisplay">
                    <img src="images/ona.png" alt="">
                </div>
                <div class="unit">(支)</div>
                <div id="ym_churuku_1" style="height:330px;width: 90%"></div>
                <div id="ym_churuku_2" style="height:330px;width: 90%"></div>
                <div class="top_left">
                    <img src="images/top-left.png" alt="" srcset="">
                </div>
                <div class="top_right">
                    <img src="images/top-right.png" alt="" srcset="">
                </div>
                <div class="bottom-left">
                    <img src="images/bottom-left.png" alt="" srcset="">
                </div>
                <div class="bottom-right">
                    <img src="images/bottom-right.png" alt="" srcset="">
                </div>
            </div>
            <div class="right_item">
                <div class="item_title">
                    <div class="title_text">问题疫苗警告</div>
                    <div class="title_img">
                        <img src="images/title_img.png" alt="" srcset="">
                    </div>
                </div>
                <div class="table_box">
                    <div class="table_top">
                        <div class="table_top_item" style="margin-left:10%">位置</div>
                        <div class="table_top_item">疫苗种类</div>
                        <div class="table_top_item">操作</div>
                    </div>
                    <div class="table_content">
                        <div class="table_content_row">
                            <div class="red_block_box">
                                <div class="red_block"></div>
                            </div>
                            <div class="table_content_item">2号冰柜</div>
                            <div class="table_content_item">乙肝</div>
                            <div class="table_content_item details vac_warning"><i>查看详情</i></div>
                        </div>
                        <div class="table_content_row">
                            <div class="red_block_box">
                                <div class="red_block"></div>
                            </div>
                            <div class="table_content_item">1号冰柜</div>
                            <div class="table_content_item">卡介苗</div>
                            <div class="table_content_item details vac_warning"><i>查看详情</i></div>
                        </div>
                        <div class="table_content_row">
                            <div class="red_block_box">
                                <div class="red_block"></div>
                            </div>
                            <div class="table_content_item">2号冰柜</div>
                            <div class="table_content_item">脊灰灭活</div>
                            <div class="table_content_item details vac_warning"><i>查看详情</i></div>
                        </div>
                    </div>
                </div>
                <div class="top_left">
                    <img src="images/top-left.png" alt="" srcset="">
                </div>
                <div class="top_right">
                    <img src="images/top-right.png" alt="" srcset="">
                </div>
                <div class="bottom-left">
                    <img src="images/bottom-left.png" alt="" srcset="">
                </div>
                <div class="bottom-right">
                    <img src="images/bottom-right.png" alt="" srcset="">
                </div>
            </div>
            <div class="right_item">
                <div class="item_title">
                    <div class="title_text">接种点各疫苗存储情况</div>
                    <div class="title_img">
                        <img src="images/title_img.png" alt="" srcset="">
                    </div>
                </div>
                <div id="ym_chucun" style="height:330px"></div>
                <div class="top_left">
                    <img src="images/top-left.png" alt="" srcset="">
                </div>
                <div class="top_right">
                    <img src="images/top-right.png" alt="" srcset="">
                </div>
                <div class="bottom-left">
                    <img src="images/bottom-left.png" alt="" srcset="">
                </div>
                <div class="bottom-right">
                    <img src="images/bottom-right.png" alt="" srcset="">
                </div>
            </div>
            <div class="right_item">
                <div class="item_title">
                    <div class="title_text"> 冰箱温度警告</div>
                    <div class="title_img">
                        <img src="images/title_img.png" alt="" srcset="">
                    </div>
                </div>
                <div class="table_box">
                    <div class="table_top">
                        <div class="table_top_item" style="margin-left:10%">冰柜</div>
                        <div class="table_top_item">温度</div>
                        <div class="table_top_item">操作</div>
                    </div>
                    <div class="table_content">
                        <div class="table_content_row">
                            <div class="red_block_box">
                                <div class="red_block"></div>
                            </div>
                            <div class="table_content_item">2号冰柜</div>
                            <div class="table_content_item">10.3℃</div>
                            <div class="table_content_item details temp_warning"><i>查看详情</i></div>
                        </div>
                        <div class="table_content_row">
                            <div class="red_block_box">
                                <div class="red_block"></div>
                            </div>
                            <div class="table_content_item">1号冰柜</div>
                            <div class="table_content_item">15.3℃</div>
                            <div class="table_content_item details temp_warning"><i>查看详情</i></div>
                        </div>
                    </div>
                </div>
                <div class="top_left">
                    <img src="images/top-left.png" alt="" srcset="">
                </div>
                <div class="top_right">
                    <img src="images/top-right.png" alt="" srcset="">
                </div>
                <div class="bottom-left">
                    <img src="images/bottom-left.png" alt="" srcset="">
                </div>
                <div class="bottom-right">
                    <img src="images/bottom-right.png" alt="" srcset="">
                </div>
            </div>
        </div>
    </div>
    <script>
        get_time() //页面打开赋值时间
        setInterval("get_time()", 1000) //每秒刷新时间

        function getFormatDate() {
            var nowDate = new Date();
            var year = nowDate.getFullYear();
            var month = nowDate.getMonth() + 1 < 10 ? "0" + (nowDate.getMonth() + 1) : nowDate.getMonth() + 1;
            var date = nowDate.getDate() < 10 ? "0" + nowDate.getDate() : nowDate.getDate();
            var hour = nowDate.getHours() < 10 ? "0" + nowDate.getHours() : nowDate.getHours();
            var minute = nowDate.getMinutes() < 10 ? "0" + nowDate.getMinutes() : nowDate.getMinutes();
            var second = nowDate.getSeconds() < 10 ? "0" + nowDate.getSeconds() : nowDate.getSeconds();
            return year + "-" + month + "-" + date + " " + hour + ":" + minute + ":" + second;
        }

        function get_time() {
            var now_time = getFormatDate()
            $(".city_time").text(now_time)
        }
        var getUrlParameter = function getUrlParameter(sParam) { //获取页面传参的值
            var sPageURL = decodeURIComponent(window.location.search.substring(1)),
                sURLVariables = sPageURL.split('&'),
                sParameterName,
                i;

            for (i = 0; i < sURLVariables.length; i++) {
                sParameterName = sURLVariables[i].split('=');

                if (sParameterName[0] === sParam) {
                    return sParameterName[1] === undefined ? true : sParameterName[1];
                }
            }
        };
        var city = getUrlParameter('city')
        $(".now_choose").text(city)
        // 各个疫苗接种情况
        var ym_jiezhong = echarts.init(document.getElementById('ym_jiezhong'));
        option_ym_jiezhong = {
            // color: ['#ec6941', '#00aaff', 'ffab4f'],
            tooltip: {
                trigger: 'axis',
                axisPointer: { // 坐标轴指示器，坐标轴触发有效
                    type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'
                }
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                top: '4%',
                containLabel: true
            },
            xAxis: [{
                type: 'category',

                data: ['乙肝', '卡介苗', '脊灰灭活', '脊灰减毒活', '百白破', '白破', '麻风', '麻腮风', '乙脑减毒活', 'A+C群流脑结合',
                    'A+C群流脑多糖', '甲肝减毒活',
                ],
                axisTick: {
                    alignWithLabel: true
                },
                axisLabel: {
                    show: true,
                    interval: 0, //强制显示所有疫苗名称  1：间隔显示
                    textStyle: {
                        color: '#1db2f1'
                    }
                },
                axisLine: {
                    lineStyle: {
                        color: '#1db2f1',
                        // width: 8, //这里是为了突出显示加上的
                    }
                }

            }],
            yAxis: [{
                type: 'value',
                splitLine: {
                    show: false
                },
                axisLabel: {
                    show: true,
                    textStyle: {
                        color: '#1db2f1'
                    },

                    formatter: '{value}(针)'
                },
            }],
            series: [{
                name: '接种数量',
                type: 'bar',
                barWidth: '60%',
                itemStyle: {
                    normal: {
                        //每根柱子颜色设置
                        color: function (params) {
                            let colorList = [
                                "#ec6941",
                                "#00aaff",
                                "#ffab4f",
                                "#ec6941",
                                "#00aaff",
                                "#ffab4f",
                                "#ec6941",
                                "#00aaff",
                                "#ffab4f",
                                "#ec6941",
                                "#00aaff",
                                "#ffab4f",
                                "#ec6941",
                                "#00aaff",
                                "#ffab4f",
                                "#ec6941",
                                "#00aaff",
                                "#ffab4f",
                                "#ec6941",
                            ];
                            return colorList[params.dataIndex];
                        }
                    }
                },
                barWidth: 15,
                data: [92, 355, 202, 347, 302, 150, 204, 302, 40, 236,
                    237, 290
                ]
            }]
        };

        ym_jiezhong.setOption(option_ym_jiezhong);

        // 各个疫苗出入库情况  第一页
        var myChart1 = echarts.init(document.getElementById('ym_churuku_1'));

        // 指定图表的配置项和数据
        option1 = {
            // title: {
            //     text: '世界人口总量',
            //     subtext: '数据来自网络'
            // },
            color: ['#40d4d2', '#f6c742', ],
            tooltip: {
                trigger: 'axis',
                axisPointer: {
                    type: 'shadow'
                }
            },
            legend: {
                data: ['进', '出'],
                textStyle: {
                    color: '#ffffff' //字体颜色
                },


            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
            },
            xAxis: {
                type: 'value',
                boundaryGap: [0, 0.001],
                splitLine: {
                    show: false
                },
                axisLabel: {
                    show: true,
                    textStyle: {
                        color: '#1db2f1'
                    }
                },

            },
            yAxis: {
                type: 'category',
                data: ['乙肝', '卡介苗', '脊灰灭活', '脊灰减毒活', '百白破', '白破', ],
                axisLabel: {
                    show: true,
                    textStyle: {
                        color: '#1db2f1'
                    },
                },
                axisLine: {
                    lineStyle: {
                        color: '#1db2f1',
                    }
                }
            },
            series: [{
                    name: '进',
                    type: 'bar',
                    data: [50, 60, 80, 99, 62, 60, 80, 99, 62, ],
                    itemStyle: {
                        emphasis: {
                            barBorderRadius: 7
                        },
                        normal: {
                            barBorderRadius: 7,
                            color: new echarts.graphic.LinearGradient(
                                0, 0, 1, 0,
                                [{
                                        offset: 0,
                                        color: '#49fcb0'
                                    },
                                    {
                                        offset: 1,
                                        color: '#39b4ed'
                                    }

                                ]

                            )
                        }
                    }

                },
                {
                    name: '出',
                    type: 'bar',
                    data: [56, 77, 60, 32, 56, 77, 60, 23],
                    itemStyle: {
                        emphasis: {
                            barBorderRadius: 7
                        },
                        normal: {
                            barBorderRadius: 7,
                            color: new echarts.graphic.LinearGradient(
                                0, 0, 1, 0,
                                [{
                                        offset: 0,
                                        color: '#fcf648'
                                    },
                                    {
                                        offset: 1,
                                        color: '#ee843a'
                                    }

                                ]

                            )
                        }
                    }
                }
            ]
        };
        // 使用刚指定的配置项和数据显示图表。第一页
        myChart1.setOption(option1);


        //第二页
        var myChart2 = echarts.init(document.getElementById('ym_churuku_2'));

        // 指定图表的配置项和数据
        option2 = {
            // title: {
            //     text: '世界人口总量',
            //     subtext: '数据来自网络'
            // },
            color: ['#40d4d2', '#f6c742', ],
            tooltip: {
                trigger: 'axis',
                axisPointer: {
                    type: 'shadow'
                }
            },
            legend: {
                data: ['进', '出'],
                textStyle: {

                    color: '#ffffff' //字体颜色
                },


            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
            },
            xAxis: {
                type: 'value',
                boundaryGap: [0, 0.001],
                splitLine: {
                    show: false
                },
                axisLabel: {
                    show: true,
                    textStyle: {
                        color: '#1db2f1'
                    }
                }
            },
            yAxis: {
                type: 'category',
                data: ['麻风', '麻腮风', '乙脑减毒活', 'A+C群流脑结合', 'A+C群流脑多糖', '甲肝减毒活', ],
                axisLabel: {
                    show: true,
                    textStyle: {
                        color: '#1db2f1'
                    }
                },
                axisLine: {
                    lineStyle: {
                        color: '#1db2f1',
                    }
                }
            },
            series: [{
                    name: '进',
                    type: 'bar',
                    data: [69, 99, 50, 60, 80, 99, 62, 80, ],
                    itemStyle: {
                        emphasis: {
                            barBorderRadius: 7
                        },
                        normal: {
                            barBorderRadius: 7,
                            color: new echarts.graphic.LinearGradient(
                                0, 0, 1, 0,
                                [{
                                        offset: 0,
                                        color: '#49fcb0'
                                    },
                                    {
                                        offset: 1,
                                        color: '#39b4ed'
                                    }

                                ]

                            )
                        }
                    }

                },
                {
                    name: '出',
                    type: 'bar',
                    data: [32, 45, 56, 77, 60, 32, 32, 60],
                    itemStyle: {
                        emphasis: {
                            barBorderRadius: 7
                        },
                        normal: {
                            barBorderRadius: 7,
                            color: new echarts.graphic.LinearGradient(
                                0, 0, 1, 0,
                                [{
                                        offset: 0,
                                        color: '#fcf648'
                                    },
                                    {
                                        offset: 1,
                                        color: '#ee843a'
                                    }

                                ]

                            )
                        }
                    }
                }
            ]
        };
        // 使用刚指定的配置项和数据显示图表。第一页
        myChart2.setOption(option2);
        $(document).ready(function () { //分页显示
            $("#ym_churuku_2").addClass("isdisplay")
            $(".next_img").bind('click', function () {
                $("#ym_churuku_2,#ym_churuku_1,.next_img,.ona_img").toggleClass("isdisplay")
            })
            $(".ona_img").bind('click', function () {
                $("#ym_churuku_2,#ym_churuku_1,.next_img,.ona_img").toggleClass("isdisplay")
            })
        })


        // 各个疫苗储存情况
        var ym_chucun = echarts.init(document.getElementById('ym_chucun'));
        option_ym_chucun = {
            // color: ['#ec6941', '#00aaff', 'ffab4f'],
            tooltip: {
                trigger: 'axis',
                axisPointer: { // 坐标轴指示器，坐标轴触发有效
                    type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'
                }
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
            },
            xAxis: [{
                type: 'category',
                data: ['乙肝', '卡介苗', '脊灰灭活', '脊灰减毒活', '百白破', '白破', '麻风', '麻腮风', '乙脑减毒活', 'A+C群流脑结合',
                    'A+C群流脑多糖', '甲肝减毒活',
                ],
                axisTick: {
                    alignWithLabel: true
                },
                axisLabel: {
                    show: true,
                    textStyle: {
                        color: '#1db2f1'
                    },
                    interval: 1,
                },
                axisLine: {
                    lineStyle: {
                        color: '#1db2f1',
                        // width: 8, //这里是为了突出显示加上的
                    }
                }

            }],
            yAxis: [{
                type: 'value',
                splitLine: {
                    show: false
                },
                axisLabel: {
                    show: true,
                    textStyle: {
                        color: '#1db2f1'
                    },

                    formatter: '{value}(支)'
                },
            }],
            series: [{
                name: '储存数量',
                type: 'bar',
                barWidth: '60%',
                itemStyle: {
                    normal: {
                        //每根柱子颜色设置
                        color: function (params) {
                            let colorList = [
                                "#e60012",
                                "#22ac38",
                                "#f39800",
                                "#22ac38",
                                "#22ac38",
                                "#f39800",
                                "#22ac38",
                                "#22ac38",
                                "#e60012",
                                "#f39800",
                                "#f39800",
                                "#f39800",
                                "#f39800",
                                "#f39800",
                                "#f39800",
                                "#f39800",
                                "#f39800",
                            ];
                            return colorList[params.dataIndex];
                        }
                    }
                },
                barWidth: 15,
                data: [920, 3505, 2002, 3347, 3902, 1500, 2204, 3502, 460, 2136, 1563, 2845, 1656, 1291,
                    2357, 2950
                ]
            }]
        };
        ym_chucun.setOption(option_ym_chucun);


        // 问题疫苗警告
        $(".vac_warning").click(function (e) {
            var el_bro = $(this).prevAll()
            var adderss = el_bro[1].innerText
            var msg = el_bro[0].innerText
            console.log(e)
            // return false
            layer.open({
                type: 1,
                area: '500px',
                title: '详细信息',
                btn: ['确定'],
                btnAlign: 'c',
                closeBtn: 1,
                shade: [0.5, '#000'],
                anim: 1,
                shadeClose: true,
                content: `<div id="layer_box">
        <div class="layer_item">
            <div class="layer_item_title">地址</div>
            <div class="layer_item_content">` + adderss + `1号储藏室</div>
        </div>
        <div class="layer_item">
            <div class="layer_item_title">疫苗种类</div>
            <div class="layer_item_content">` + msg + `疫苗</div>
        </div>
        <div class="layer_item">
            <div class="layer_item_title">预留信息</div>
            <div class="layer_item_content">Lorem ipsum dolor, sit . </div>
        </div>
        </div>`,
            })
        })

        // 冰箱温度警告
        $(".temp_warning").click(function (e) {
            var el_bro = $(this).prevAll()
            var adderss = el_bro[1].innerText
            var msg = el_bro[0].innerText
            console.log(e)
            // return false
            layer.open({
                type: 1,
                title: '详细信息',
                shade: [0.8, '#000'],
                closeBtn: 1,
                anim: 1,
                scrollbar: false,//锁定浏览器滚动条
                area: '500px',
                shadeClose: true,
                skin: 'yourclass',
                content: `<div id="layer_box">
        <div class="layer_item mar_top" >
            <div class="layer_item_title">冰箱位置</div>
            <div class="layer_item_content">` + adderss + `</div>
        </div>
        <div class="layer_item">
            <div class="layer_item_title">报警温度</div>
            <div class="layer_item_content">` + msg + `</div>
        </div>
        <div class="layer_item">
            <div class="layer_item_title">预留信息</div>
            <div class="layer_item_content">Lorem ipsum dolor, sit . </div>
        </div>
        </div>`,
            });

        })
    </script>
</body>

</html>